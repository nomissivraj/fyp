<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Voice Developer</title>
        
        <link rel="stylesheet" type="text/css" href="node_modules/codemirror/lib/codemirror.css">
        <link rel="stylesheet" type="text/css" href="node_modules/codemirror/theme/lucario.css">
        <link rel="stylesheet" type="text/css" href="css/style.css">
        <script src="node_modules/codemirror/lib/codemirror.js"></script>
        <script src="node_modules/codemirror/mode/xml/xml.js"></script>
        <script src="node_modules/codemirror/mode/css/css.js"></script>
        <script src="node_modules/codemirror/mode/javascript/javascript.js"></script>
        <script src="node_modules/codemirror/mode/htmlmixed/htmlmixed.js"></script>
        <script src="node_modules/codemirror/addon/edit/matchtags.js"></script>
        <script src="node_modules/codemirror/addon/edit/closetag.js"></script>
        <script src="node_modules/codemirror/addon/fold/xml-fold.js"></script>
        <script src="scripts/funcs.js"></script>
        <script src="scripts/stt.js"></script>
        <script src="scripts/stc.js"></script>
        <script src="scripts/jscolor.js"></script>

    </head>
    <body class="text-editor">
        <header class="app-header">
            <div class="app-toolbar">
                <div class="app-toolbar__icon">
                    <img src="img/app-icon-64x64.png" alt="Voice Developer Icon">
                </div>
                <div class="app-toolbar__menu">
                    <ul id="menu">
                        <li class="dropdown__item">
                            <button class="dropdown__btn dropdown__btn--file">File</button>
                            <div class="dropdown__menu" id="dropdown__menu--file"  style="display: none">
                                <ul class="submenu">
                                    <li>
                                        <button id="newfilebtn" class="submenu__btn">
                                            <span class="submenu__item-title">New File</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button id="deletefilebtn" class="submenu__btn">
                                            <span class="submenu__item-title">Delete File</span>
                                        </button>
                                    </li>
                                    <hr>
                                    <li>
                                        <button id="savebtn" class="submenu__btn">
                                            <span class="submenu__item-title">Save</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button id="saveallbtn" class="submenu__btn">
                                            <span class="submenu__item-title">Save All</span>
                                        </button>
                                    </li>
                                    <hr>
                                    <li>
                                        <button id="exitbtn" class="submenu__btn">
                                            <span class="submenu__item-title">Exit</span>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="dropdown__item">
                            <button class="dropdown__btn dropdown__btn--edit">Edit</button>
                            <div class="dropdown__menu" id="dropdown__menu--edit" style="display: none">
                                <ul class="submenu">
                                    <li>
                                        <button id="undobtn" class="submenu__btn">
                                            <span class="submenu__item-title">Undo</span>
                                            <span class="submenu__item-shortcut">Ctrl+Z</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button id="redobtn" class="submenu__btn">
                                            <span class="submenu__item-title">Redo</span>
                                            <span class="submenu__item-shortcut">Ctrl+Shift+Z</span>
                                        </button>
                                    </li>
                                    <hr>
                                    <li>
                                        <button id="cutbtn" class="submenu__btn">
                                            <span class="submenu__item-title">Cut</span>
                                            <span class="submenu__item-shortcut">Ctrl+X</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button id="copybtn" class="submenu__btn">
                                            <span class="submenu__item-title">Copy</span>
                                            <span class="submenu__item-shortcut">Ctrl+C</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button id="pastebtn" class="submenu__btn">
                                            <span class="submenu__item-title">Paste</span>
                                            <span class="submenu__item-shortcut">Ctrl+P</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button id="deletebtn" class="submenu__btn">
                                            <span class="submenu__item-title">Delete</span>
                                        </button>
                                    </li>
                                    <hr>
                                    <li>
                                        <button id="enterbtn" class="submenu__btn">
                                            <span class="submenu__item-title">Enter</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button id="tabbtn" class="submenu__btn">
                                            <span class="submenu__item-title">Tab</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button id="spacebtn" class="submenu__btn">
                                            <span class="submenu__item-title">Space</span>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="dropdown__item">
                            <button class="dropdown__btn dropdown__btn--preview">Preview</button>
                            <div class="dropdown__menu" id="dropdown__menu--preview"  style="display: none">
                                <ul class="submenu">
                                    <li>
                                        <button id="previewbtn" class="submenu__btn">
                                            <span class="submenu__item-title">Open in Browser</span>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </li>
                        <li class="dropdown__item">
                            <button class="dropdown__btn dropdown__btn--tools">Tools</button>
                            <div class="dropdown__menu" id="dropdown__menu--tools"  style="display: none">
                                <ul class="submenu">
                                    <li>
                                        <button id="color-picker" class="submenu__btn">
                                            <span class="submenu__item-title">Color Picker</span>
                                        </button>
                                    </li>
                                    <li>
                                        <button id="values-tool" class="submenu__btn">
                                            <span class="submenu__item-title">Values Tool</span>
                                        </button>
                                    </li>
                                    <hr>
                                    <li>
                                        <button id="help-tool" class="submenu__btn">
                                            <span class="submenu__item-title">Help</span>
                                        </button>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="app-toolbar__title">
                    <span>Voice Developer</span>
                </div>
                <div class="app-toolbar__options">
                    <div id="min-btn" class="options__minimise">
                        <img src="img/app-min.svg" width="12px" alt="minimise window icon">
                    </div>
                    <div id="max-btn" class="options__maximise">
                        <img src="img/app-max.svg" width="12px" alt="maximise window icon">
                    </div>
                    <div id="restore-btn" class="options__restore">
                        <img src="img/app-restore.svg" width="12px" alt="restore window icon">
                    </div>
                    <div id="close-btn" class="options__close">
                        <img src="img/app-close.svg" width="12px" alt="close window icon">
                    </div>
                </div>
            </div>
        </header>

        <main>
        
            <div class="tab-bar__container"> 
                <div class="tab-bar">
                    <ul class="tabs">
                        
                    </ul>
                </div>
            </div>
            <div id="no-files" style="display: none; user-select: none;">
                    <h1>No files! :(</h1>
                    <p>You have no files in this project. Please begin by creating a new HTML or CSS file through the menu. <br><br>e.g. 'File' > 'New File'</p>
                </div>
            <div id="pages-container">

            </div>

            <div id="newfileform__container" class="dialogue" style="display:none">
                <h1>New Page</h1>
                <form id="newfile__form">
                    <input type="text" id="file-to-create" placeholder="file.html / file.css" required>
                    <label class="radio-container">HTML
                        <input type="radio" name="ext-radio" value="html">
                        <span class="checkmark"></span>
                    </label>
                    <label class="radio-container">CSS
                        <input type="radio" name="ext-radio" value="css">
                        <span class="checkmark"></span>
                    </label>
                    <br><br>
                    <button type="button" onclick="resetForms('newfileform__container')">Cancel</button>
                    <button type="submit" class="positive">Create</button>
                </form>
            </div>

            <div id="deletefileform__container" class="dialogue" style="display:none">
                <h1>Delete Page</h1>
                <form id="deletefile__form">
                        <p>You are trying to delete page: <strong id="delete-file-name"></strong></p>
                    <input id="file-to-delete" placeholder="Page name" type="hidden" required>
                    <button type="button" onclick="resetForms('deletefileform__container')">Cancel</button>
                    <button type="submit" class="negative">Delete</button>
                </form>
            </div>

            
            
            <button type="button" id="dictate-btn"></button>
        </main>
        <div id="valuetool__container" class="dialogue dialogue--tool dialogue--moveable"  style="display: none;">
            <form id="valuetool__form">
                <input type="text" id="value-to-insert" placeholder="10px">
                <div class="valuetool-section valuetool__numbers">
                    <button class="valuebtn" type="button" value="1">1</button>
                    <button class="valuebtn" type="button" value="2">2</button>
                    <button class="valuebtn" type="button" value="3">3</button>
                    <button class="valuebtn" type="button" value="4">4</button>
                    <button class="valuebtn" type="button" value="5">5</button>
                    <button class="valuebtn" type="button" value="6">6</button>
                    <button class="valuebtn" type="button" value="7">7</button>
                    <button class="valuebtn" type="button" value="8">8</button>
                    <button class="valuebtn" type="button" value="9">9</button>
                    <button class="valuebtn" type="button" value="0">0</button>
                </div>
                <div class="valuetool-section valuetool__symbols">
                        <button class="valuebtn" type="button" value="/">/</button>
                        <button class="valuebtn" type="button" value="*">*</button>
                        <button class="valuebtn" type="button" value="-">-</button>
                        <button class="valuebtn" type="button" value="+">+</button>
                        <button class="valuebtn" type="button" value="%">%</button>
                        <button class="valuebtn" type="button" value=".">.</button>
                        <button class="valuebtn" type="button" value=", ">,</button>
                        <button class="valuebtn" type="button" value=": ">:</button>
                        <button class="valuebtn" type="button" value=";">;</button>
                        <button class="valuebtn" type="button" value="()">()</button>
                        <button class="valuebtn" type="button" value="{">{</button>
                        <button class="valuebtn" type="button" value="}">}</button>
                        <button class="valuebtn" type="button" value="&gt;">&gt;</button>
                        <button class="valuebtn" type="button" value="~">~</button>
                        <button class="valuebtn" type="button" value="#">#</button>
                        <button class="valuebtn" type="button" value="n">n</button>
                        <button class="valuebtn" type="button" value="=">=</button>
                        <button class="valuebtn" type="button" value="$">$</button>
                        <button class="valuebtn" type="button" value="^">^</button>
                        <button class="valuebtn" type="button" value='" "'>" "</button>

                </div>
                <br>
                <div class="valuetool-section valuetool__entities">
                    <button class="valuebtn" type="button" value="px">px</button>
                    <button class="valuebtn" type="button" value="em">em</button>
                    <button class="valuebtn" type="button" value="rem">rem</button>
                    <button class="valuebtn" type="button" value="rgba()">rgba</button>
                    <button class="valuebtn" type="button" value="url(' ')">url</button>
                    <button class="valuebtn" type="button" value="calc( )">calc</button>
                    <button class="valuebtn" type="button" value="href">href</button>
                    <button class="valuebtn" type="button" value=" ">space</button>
                </div>
                
                
                <div class="controls">
                    <button class="valuebtn" type="button" value="clear">clear</button>
                    <button class="valuebtn positive" type="submit" >insert</button>
                </div>
                
            </form>
            <button type="button" class="close-btn" onclick="toggleDisplay('valuetool__container')"><strong>X</strong></button>
        </div>
        <div id="colorpicker__container" class="dialogue dialogue--tool dialogue--moveable dialogue--colorpicker" style="display: none;">
            <button id="hex-submit">HEX</button>
            <button id="rgb-submit">RBG</button>
            <input class="jscolor" value="ab2567">
            <button type="button" class="close-btn" onclick="toggleDisplay('colorpicker__container')"><strong>X</strong></button>
        </div>
        <div id="helptool__container" class="dialogue dialogue--moveable dialogue--help" style="display: none">
            <h1>Help</h1>
            <div class="help-tabs tab-bar">
                    <ul>
                        <li>
                            <button type="button" class="help-tab help-tab--html active" onclick="">HTML</button>
                        </li>
                        <li>
                            <button type="button" class="help-tab help-tab--css" onclick="">CSS</button>
                        </li>
                        <li>
                            <button type="button" class="help-tab help-tab--commands" onclick="">Commands</button>
                        </li>
                        <li>
                            <button type="button" class="help-tab help-tab--mouse" onclick="">Mouse modes</button>
                        </li>
                    </ul>
                </div>
            <div class="help-pages">
                <div class="help-page help-page--html">
                    <h2>HTML Tags & Attributes</h2>
                    <article class="help-page__content">
                        <p>These elements utilise the <strong class="underline">LEFT CLICK MOUSE MODE</strong> and will be placed wherever the cursor is placed within the text editor.</p>
                        <p>Whenever you wish to speak to the application you <strong class="underline">must</strong> click the orange microphone button in the bottom right of the screen, and <strong class="underline">again (with the same mouse button)</strong>after speaking to finish.</p>

                        <h3>Inserting an HTML element:</h3>
                        <hr>
                        <p>Elements can be inserted by saying which element you would like, followed by "tag"</p>
                        <p><strong>e.g. "article tag", "image tag" or "main tag"</strong></p>
                        
                        <h3>Inserting an HTML attribute:</h3>
                        <hr>
                        <p>Attributes can be inserted by saying which attribute you would like followed by the word "attribute"</p>
                        <p><strong>e.g. "source attribute" or "placeholder attribute"</strong></p>
                    </article>
                </div>
    
                <div class="help-page help-page--css" style="display: none">
                    <h2>CSS Selectors, Properties & values</h2>
                    <article class="help-page__content">
                            <p>These selectors, properties and values utilise the <strong class="underline">LEFT CLICK MOUSE MODE</strong> and will be placed wherever the cursor is placed within the text editor.</p>
                            <p>Whenever you wish to speak to the application you <strong class="underline">must</strong> click the orange microphone button in the bottom right of the screen, and <strong class="underline">again (with the same mouse button)</strong>after speaking to finish.</p>
                            
                            <h3>Inserting CSS Selectors:</h3>
                            <hr>
                            <p>CSS Selectors are split into 4 main categories, ID's (#selectorname), Classes (.selectorname), Tags (tagname) & Pseudo (::pseudoname). These can by inserted by saying "CSS" or "Style", followed by "ID", "Class" or "Tag", and finally the name of the intended id, class or tag. The only exception being "Psuedo" Which is inserted by simply saying "Pseudo" followed by the name of the Psuedo element</p>
                            <p><strong>e.g. "CSS Class container", "Style ID element", "CSS Tag div" etc. </strong></p>
                            <p><strong>"Pseudo before", "Pseudo after", "Pseudo active" etc. </strong></p>
                            <p>Selectors such as '>', '+', '~' etc. can be inserted using the Value Tool, this can be accessed via the 'Tools' menu item or by clicking the microphone button and saying "value tool".</p>
                            
                            <h3>Inserting CSS Properties:</h3>
                            <hr>
                            <p>Properties can be inserted by saying the intended property followed or preceeded by the phrase "CCS Property" or "Style Property"</p>
                            <p><strong>e.g. "background-color CSS property", "CSS property text-transform", "Style Property border" etc.</strong></p>
                            
                            <h3>Inserting CSS Values:</h3>
                            <hr>
                            <p>Values can be inserted by saying the intended value followed or preceeded by the phrase "CSS Value" or "Style Value"</p>
                            <p><strong>e.g. "CSS Value absolute", "Style Value no repeat", "CSS Value URL" etc.</strong></p>
                            <p>Colour values can be inserted using the colour picker tool which is accessed via  the 'Tools' menu item or by clicking the microphone button and saying "colour picker"</p>
                            <p>CSS pixel, em, rem or number percentage values, as well as more complex compound values such as: 'calc(100% - 50px)', can be built using the Value Tool, which can be accessed via the 'Tools' menu item or by clicking the microphone button and saying "value tool".   </p>
                    </article>
                </div>
    
                <div class="help-page help-page--commands" style="display: none">
                    <h2>Common Commands & Single Characters or brackets</h2>
                    <strong>e.g. '#', '.', '{ }'</strong>
                    <article class="help-page__content">
                        <p>Commands are accessed using the<strong class="underline">MIDDLE MOUSE CLICK MODE</strong> and if commands output characters/content, these will be placed wherever the cursor is placed within the text editor.</p>
                        <h3>Example Commands:</h3>
                        <P>
                            "Space"<br>
                            "Cut"<br>
                            "Copy"<br>
                            "Paste"<br>
                            "Delete"<br>
                            "Exit"<br>
                            "Undo / Scratch that"<br>
                            "Redo"<br>
                            "Tab / indent"<br>
                            "Enter / newline"<br>
                            "Preview"<br>
                            "Period"<br>
                            "Hash"<br>
                            "Source / file path"<br>
                            "Colour Picker"<br>
                            "Value tool"<br>
                            "Save all"<br>
                            "Save"<br>
                            "Select all"<br>
                        </P>
                        <p>These commands are simple accessed by middle mouse clicking the microphone button on the bottom right of the screen and saying the command name.</p>
                    </article>
                </div>
    
                <div class="help-page help-page--mouse" style="display: none">
                    <h2>Mouse modes</h2>
                    <article class="help-page__content">
                        <p>There are three main dictation modes for this application. These are currently binded to mouse clicks; <strong>left</strong>, <strong>middle</strong> (mouse wheel click) and <strong>right</strong> click.</p>
                        <p>Using either of these modes requires the microphone button (found in bottom right of screen) to be clicked once to activate and clicked again to stop. You <strong>must</strong> use the same mouse button to stop the process as you did to start it.</p>
                        <h3>Left Click</h3>
                        <p>Left click is used for HTML element & attribute insertion as well as CSS selector, property and value insertion</p>
                        <h3>Right Click</h3>
                        <p>Right click mode is used for simple text insertion - what you say is what you get (more or less)</p>
                        <h3>Middle Mouse/Wheel Click</h3>
                        <p>The middle mouse click or mouse wheel press/click is used to dictate commands to the program such as cut, copy, paste, save, exit etc.</p>
                    </article>
                </div>
            </div>
            
            <button type="button" class="close-btn" onclick="toggleDisplay('helptool__container')"><strong>X</strong></button>
        </div>
    </body>
    <script>
        require('./scripts/renderer.js');
        const electron = require('electron');
        const {ipcRenderer} = electron;
        const remote = require('electron').remote;
        const app = remote.app;
        const path = require('path');
        const fs = require('file-system');
        const savesPath = path.join(app.getPath('documents'),'Voice Developer Projects','/saves/');
        const shell = require('electron').shell;
        const appPath = __dirname;
        const dialog = remote.dialog;
        process.env['ELECTRON_DISABLE_SECURITY_WARNINGS'] = 'true';

        ipcRenderer.send('ready:text-window');
        
        //Process Forms
        const newFileForm = document.getElementById('newfile__form');
        newFileForm.addEventListener('submit', newFile);

        const deleteFileForm = document.getElementById('deletefile__form');
        deleteFileForm.addEventListener('submit', deleteFile);

        const valueToolForm = document.getElementById('valuetool__form');
        valueToolForm.addEventListener('submit', insertValue);

        function newFile(e) {
            e.preventDefault();
            let pages = curProjectDetails.pages;
            let stylesheets = curProjectDetails.stylesheets;
            let fileName = document.querySelectorAll('#file-to-create')[0].value;
            fileName = fileName.replace(' ', '-');
            let supportedExts = ['css', 'html'];
            let radio = document.querySelectorAll('input[name=ext-radio]:checked')[0].value;
            
            let fileDetails = fileName.split('.');
            if (fileDetails.length === 1) {
                // Check Radio's for which is selected
                if (radio === "css") {
                    fileName = fileName+'.css';
                } else {
                    // If no extension .html or .css is given assume html file
                    fileName = fileName+'.html';
                }
            }
            let projectDetails = {
                'name' : currentProject,
                'mode' : curProjectDetails.mode,
                'layout' : curProjectDetails.layout,
                'pages' : curProjectDetails.pages,
                'stylesheets' : curProjectDetails.stylesheets,
                'newfile' : fileName
            }
            fileDetails = fileName.split('.');
            if (fileDetails.length > 1) {
                let extension = fileDetails[1];
                if (supportedExts.indexOf(extension) === -1) {
                    //alert
                    alert('please use a valid file extension. Currently only .html and .css are supported');
                    return
                }

                switch(extension) {
                    case 'html':
                        if (pages.length > 0) {
                            console.log(pages.indexOf(fileName) > -1);
                            if (pages.indexOf(fileName) > -1) {
                                alert('A file with that name already exists, try again');
                                return
                            } else {
                                ipcRenderer.send('create:file', projectDetails)
                                resetForms('newfileform__container');
                            }
                        } else if (pages.length === 0) {
                            ipcRenderer.send('create:file', projectDetails);
                            resetForms('newfileform__container');
                        }
                        break;
                    case 'css':
                        if (stylesheets.length > 0) {
                            if (stylesheets.indexOf(fileName) > -1) {
                                alert('A file with that name already exists, try again');
                                return
                            } else {
                                ipcRenderer.send('create:file', projectDetails)
                                resetForms('newfileform__container');
                            }
                        } else if (stylesheets.length === 0) {
                            ipcRenderer.send('create:file', projectDetails);
                            resetForms('newfileform__container');
                        }
                        break;
                    default:
                        break;
                }
            }

            
        }

        function deleteFile(e) {
            e.preventDefault();
            const fileName = document.getElementById('file-to-delete').value;
            let projectDetails = {
                'name' : currentProject,
                'mode' : curProjectDetails.mode,
                'layout' : curProjectDetails.layout,
                'pages' : curProjectDetails.pages,
                'stylesheets' : curProjectDetails.stylesheets,
                'deletefile' : fileName
            }

            if (curProjectDetails.pages.indexOf(fileName) === -1 && curProjectDetails.stylesheets.indexOf(fileName) === -1) {
                alert("No existing file with the name '"+fileName+"' please try again.")
                console.log('Page not found')
            } else {
                let confirmation = confirm("Please confirm deletion of file: " +fileName);
                if (confirmation) {
                    ipcRenderer.send('delete:page', projectDetails);
                    toggleDisplay('deletepageform__container');
                } else toggleDisplay('deletepageform__container');
            }
        }

        function insertValue(e) {
            e.preventDefault();
            console.log("clicked")
            let input = document.getElementById("value-to-insert");
            let value = input.value;
            document.activeElement.value = value;
            input.value = "";
        }

        // Global variables
        let currentProject;
        let curProjectDetails;
        let editorMode = 'html';
        let editors = {};
        let currentEditor;
        let currentPage;
        let pageContent = {};
        let unsavedChanges = false;

        let cssProps,
            cssPropVals,
            tags,
            attributes, 
            colors,
            cssPseudos;
          
        // Recieve
        ipcRenderer.on('load:data', (e, data) => {
            currentProject = data.name;
            curProjectDetails = data;
            let titleCont = document.querySelectorAll('.app-toolbar__title span')[0];
            let projectTitle = document.createTextNode(' - '+currentProject);
            titleCont.style = 'text-transform:capitalize';
            titleCont.appendChild(projectTitle);
            // Load html containers for CM instances
            initCMcontainers(curProjectDetails);
            // Load CM instances
            initCMInstances(curProjectDetails);
            // Load tabs
            initTabs(curProjectDetails);
            // Load file content into page editors 
            loadPageContent(curProjectDetails);
            
            initDictate('textEditor');
            
            initMenu('menu','.dropdown__btn', '.submenu__btn');
            if (data.pages.length === 0 && data.stylesheets.length === 0) {
                toggleDisplay('no-files');
            }

            // Load JSON files
            fs.readFile(path.join(appPath,'/scripts/cssprops.json'), (err, data) => {
                cssProps = JSON.parse(data);
            });

            fs.readFile(path.join(appPath,'/scripts/csspropvals.json'), (err, data) => {
                cssPropVals = JSON.parse(data);
            });

            fs.readFile(path.join(appPath,'/scripts/tags.json'), (err, data) => {
                tags = JSON.parse(data);
            });

            fs.readFile(path.join(appPath,'/scripts/attributes.json'), (err, data) => {
                attributes = JSON.parse(data);
            });

            fs.readFile(path.join(appPath,'/scripts/colors.json'), (err, data) => {
                colors = JSON.parse(data);
            });

            fs.readFile(path.join(appPath,'/scripts/pseudos.json'), (err, data) => {
                cssPseudos = JSON.parse(data);
            });

            initValuesTool();
            initColorPicker();
            dragElement(document.getElementById("valuetool__container"));
            dragElement(document.getElementById("colorpicker__container"));
            dragElement(document.getElementById("helptool__container"));
            initResize();
            initHelpTabs();
            heightBasedOnContainer('.help-pages', "#helptool__container", -70);
        });

        ipcRenderer.on('insert:page', (e, data) => {
            console.log(data);
            let noFiles = document.getElementById('no-files');
            noFiles.style = 'display: none';
            //add new CM container
            insertCmContainer(data);
            // add new CM instance
            newCmInstance(data);
            //add new tab
            addNewTab(data);
            //load new page content into new CM instance
            loadNewPageContent(data);
            
            updateCurProjectDetails(data);

            initInputListeners();
        });

        ipcRenderer.on('remove:page', (e, data) => {
            // Remove page from renderer/window and all links to it (tabs, variables etc.)
            rendererDestroyPage(data);
            
            resetForms('deletefileform__container');
            
            setTab('.tab-btn', firstTab());
            
            noPages();
        });

        var map = {}; // You could also use an array
        onkeydown = onkeyup = function(e){
            map[e.keyCode] = e.type == 'keydown';
            /* insert conditional here */
           // console.log(map)
        }
        
        
        

        
    </script>
</html>